<ng-container *ngIf="currentUser">
  <figure class="text-center h1">
    <p>Hello {{ currentUser.firstName }} {{ currentUser.lastName }}</p>
  </figure>
</ng-container>
<section>
  <div class="card text-center mx-auto" style="width: 22rem;">

    <img alt="profile" class="card-img-top" src="/assets/pictures/profile_picture.png">
    <div class="card-body">
      <h5 class="card-title" *ngIf="currentUser != undefined"> {{currentUser.firstName}} {{currentUser.lastName}}
        <br> Employee Id: {{currentUser.id}}
      </h5>
      <div *ngIf="currentUser != undefined" [(ngModel)]="newPeriod.employee == currentUser.id">
      </div>

      <form class="form-group">
        <label style="display: inline-block">Purpose:
        </label>
        <select class="form-control" [(ngModel)]="newPeriod.purpose" id="periodPurpose" name="periodPurpose">
          <option *ngFor="let p of Purpose | keyvalue" [ngValue]="p.key">{{p.value}}</option>
        </select>
        <br>
        <label>Employee Id: </label>
        <select class="form-control" [(ngModel)]="newPeriod.employee" id="periodId" name="periodId">
          <option *ngFor="let e of employees" [ngValue]="e.id">{{e.id}}</option>
        </select>
        <label>From:</label>
        <input class="form-control text-center" [(ngModel)]="newPeriod.dateFrom" type="datetime-local"
               name="periodDateFrom">
        <label>To: </label>
        <input class="form-control text-center" [(ngModel)]="newPeriod.dateTo" type="datetime-local"
        name="periodDateTo">
        <br>
        <div class="form-control" aria-label="Toolbar with button groups" class="btn-toolbar justify-content-center"
             role="toolbar">
          <button (click)="saveEntry(newPeriod)" class="btn btn-add mr-1 mb-4 justify-content-center"
                  role="button">
            <span><i class="fa fa-paper-plane m-1" aria-hidden="true"></i></span>Submit
          </button>
        </div>
      </form>

    </div>
  </div>
</section>

<!-- Table for Personal Leave Summary of any User (Current user) -->
<br>
<section class="column justify-content-center row justify-content-center" id="cards">
  <div class="col-md-9 table-responsive embed-responsive">
    <div class="mb-4 text-center">
      <button type="button" (click)="showLeaveRequest()" *ngIf="userLeave" class="btn btn-primary">Your Leave summary</button>
      <button type="button" (click)="showLeaveRequest()" *ngIf="!userLeave" class="btn btn-primary">Hide your Leave summary</button>
      <div class="card" *ngIf="!userLeave">
        <div class="card-body text-center">
          <table class="table table-responsive-sm table-hover" *ngIf="currentUser != undefined">
            <thead>
            <tr>
              <th scope="col"></th>
              <th scope="col">Purpose</th>
              <th scope="col">From</th>
              <th scope="col">To</th>
            </tr>
            </thead>
            <tbody>
            <ng-container *ngFor="let period of periods">
              <ng-container *ngIf="period.employee == currentUser.id">
                <ng-container [ngSwitch]="period.purpose">
                  <tr *ngSwitchCase="'SICK_LEAVE'" class="sick">
                    <th scope="row"></th>
                    <td>Sick leave</td>
                    <td>{{removeTFromDate(period.dateFrom)}}</td>
                    <td>{{removeTFromDate(period.dateTo)}}</td>
                  </tr>
                  <tr *ngSwitchCase="'WORKING_HOURS'" class="wHours">
                    <th scope="row"></th>
                    <td>Working hours</td>
                    <td>{{removeTFromDate(period.dateFrom)}}</td>
                    <td>{{removeTFromDate(period.dateTo)}}</td>
                  </tr>
                  <tr *ngSwitchCase="'VACATION_REQUEST'" class="vacation">
                    <th scope="row"></th>
                    <td>Vacation request</td>
                    <td>{{removeTFromDate(period.dateFrom)}}</td>
                    <td>{{removeTFromDate(period.dateTo)}}</td>
                  </tr>
                  <tr *ngSwitchCase="'CONFIRMED_VACATION'" class="cVacation">
                    <th scope="row"></th>
                    <td>Confirmed vacation</td>
                    <td>{{removeTFromDate(period.dateFrom)}}</td>
                    <td>{{removeTFromDate(period.dateTo)}}</td>
                  </tr>
                  <tr *ngSwitchCase="'SCHEDULED_WORKING_HOURS'" class="sWorkingH">
                    <th scope="row"></th>
                    <td>Scheduled working hours</td>
                    <td>{{removeTFromDate(period.dateFrom)}}</td>
                    <td>{{removeTFromDate(period.dateTo)}}</td>
                  </tr>
                  <tr *ngSwitchCase="'ABSENCE'" class="absence">
                    <th scope="row"></th>
                    <td>Absence</td>
                    <td>{{removeTFromDate(period.dateFrom)}}</td>
                    <td>{{removeTFromDate(period.dateTo)}}</td>
                  </tr>
                  <tr *ngSwitchCase="'FREE_TIME_REQUEST'" class="freeTime">
                    <th scope="row"></th>
                    <td>Free time request</td>
                    <td>{{removeTFromDate(period.dateFrom)}}</td>
                    <td>{{removeTFromDate(period.dateTo)}}</td>
                  </tr>
                  <tr *ngSwitchCase="'WORKING_HOUR_REQUEST'" class="wHourRequest">
                    <th scope="row"></th>
                    <td>Working hour request</td>
                    <td>{{removeTFromDate(period.dateFrom)}}</td>
                    <td>{{removeTFromDate(period.dateTo)}}</td>
                  </tr>
                </ng-container>
              </ng-container>
            </ng-container>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Table for Personal Leave Summary of all Employees -->
<section class="column justify-content-center row justify-content-center" id="all_leaves">
  <div class="col-md-9 table-responsive embed-responsive">
    <div class="mb-4 text-center">
      <button (click)="clearAllPeriods()" *ngIf="!allLeave" class="btn btn-primary mb-5" type="button">Leave Summary of
        all Employees
      </button>
      <button (click)="clearAllPeriods()" *ngIf="allLeave" class="btn btn-primary" type="button">Leave Summary of
        all Employees
      </button>
      <div class="card" *ngIf="allLeave">
        <div class="card-body text-center">
          <table class="table table-responsive-sm table-hover" *ngIf="currentUser != undefined">
            <thead>
            <tr>
              <th scope="col"></th>
              <th scope="col">EmployeeId</th>
              <th scope="col">Purpose</th>
              <th scope="col">From</th>
              <th scope="col">To</th>
            </tr>
            </thead>
            <tbody>
            <ng-container *ngFor="let period of periods">
              <ng-container [ngSwitch]="period.purpose">
                <ng-container *ngFor="let employee of employees">
                  <ng-container *ngIf="employee.id == period.employee">
                <tr *ngSwitchCase="'VACATION_REQUEST'" class="vacation">
                  <th scope="row"></th>
                  <td>{{employee.firstName}} {{employee.lastName}}</td>
                  <td>Vacation request</td>
                  <td>{{removeTFromDate(period.dateFrom)}}</td>
                  <td>{{removeTFromDate(period.dateTo)}}</td>
                </tr>
                <tr *ngSwitchCase="'SICK_LEAVE'" class="sick">
                  <th scope="row"></th>
                  <td>{{employee.firstName}} {{employee.lastName}}</td>
                  <td>Sick leave</td>
                  <td>{{removeTFromDate(period.dateFrom)}}</td>
                  <td>{{removeTFromDate(period.dateTo)}}</td>
                </tr>
                <tr *ngSwitchCase="'CONFIRMED_VACATION'" class="cVacation">
                  <th scope="row"></th>
                  <td>{{employee.firstName}} {{employee.lastName}}</td>
                  <td>Confirmed vacation</td>
                  <td>{{removeTFromDate(period.dateFrom)}}</td>
                  <td>{{removeTFromDate(period.dateTo)}}</td>
                </tr>
                <tr *ngSwitchCase="'WORKING_HOURS'" class="wHours">
                  <th scope="row"></th>
                  <td>{{employee.firstName}} {{employee.lastName}}</td>
                  <td>Working hours</td>
                  <td>{{removeTFromDate(period.dateFrom)}}</td>
                  <td>{{removeTFromDate(period.dateTo)}}</td>
                </tr>
                <tr *ngSwitchCase="'SCHEDULED_WORKING_HOURS'" class="sWorkingH">
                  <th scope="row"></th>
                  <td>{{employee.firstName}} {{employee.lastName}}</td>
                  <td>Scheduled working hours</td>
                  <td>{{removeTFromDate(period.dateFrom)}}</td>
                  <td>{{removeTFromDate(period.dateTo)}}</td>
                </tr>
                <tr *ngSwitchCase="'ABSENCE'" class="absence">
                  <th scope="row"></th>
                  <td>{{employee.firstName}} {{employee.lastName}}</td>
                  <td>Absence</td>
                  <td>{{removeTFromDate(period.dateFrom)}}</td>
                  <td>{{removeTFromDate(period.dateTo)}}</td>
                </tr>
                <tr *ngSwitchCase="'FREE_TIME_REQUEST'" class="freeTime">
                  <th scope="row"></th>
                  <td>{{employee.firstName}} {{employee.lastName}}</td>
                  <td>Free time request</td>
                  <td>{{removeTFromDate(period.dateFrom)}}</td>
                  <td>{{removeTFromDate(period.dateTo)}}</td>
                </tr>
                <tr *ngSwitchCase="'WORKING_HOUR_REQUEST'" class="wHourRequest">
                  <th scope="row"></th>
                  <td>{{employee.firstName}} {{employee.lastName}}</td>
                  <td>Working hour request</td>
                  <td>{{removeTFromDate(period.dateFrom)}}</td>
                  <td>{{removeTFromDate(period.dateTo)}}</td>
                </tr>
                </ng-container>
              </ng-container>
              </ng-container>
            </ng-container>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>
